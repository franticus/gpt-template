<?php
if ($_SERVER["REQUEST_METHOD"] == "POST") {
    // Проверка существования данных в $_POST
    if (isset($_POST['name'], $_POST['email'], $_POST['subject'])) {
        $domain = $_SERVER['HTTP_HOST'];
        $to = "info@".$domain;
        
        // Фильтрация и валидация данных
        $name = filter_var($_POST['name'], FILTER_SANITIZE_STRING);
        $email = filter_var($_POST['email'], FILTER_SANITIZE_EMAIL);
        $subject = filter_var($_POST['subject'], FILTER_SANITIZE_STRING);
        $message = implode("\n", $_POST);
        
        // Дополнительные проверки и валидация могут быть добавлены здесь
        
        $headers = "From: ".$email;

        // Попытка отправки письма
        $mailResult = mail($to, $subject, $message, $headers);

        if ($mailResult) {
            echo "Письмо успешно отправлено!";
        } else {
            echo "Ошибка при отправке письма.";
        }
    } else {
        echo "Отсутствуют необходимые данные.";
    }
} else {
    echo "Доступ запрещен.";
}
?>

<!DOCTYPE html>
<html lang="ru">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Thank you!</title>
    <link href="./favicon.ico" rel="icon" />

    <link href="assets/css/style.css" rel="stylesheet" />

    <style>
      * {
        padding: 0;
        margin: 0;
      }

      .bodyClass1-fgZSxP4y {
        font-family: 'Open Sans', sans-serif;
        color: #111;
      }

      .bodyClass1-fgZSxP4y .mainBlock-fgZSxP4y {
        border: 4px solid #111;
        border-top: 30px solid #111;
        border-right: px solid #111;
        border-radius: 20px;
        background: #fff;
      }

      body {
        margin: 0px;
        padding: 0px;
        font-family: 'Piazzolla', sans-serif;
        height: 100vh;
        width: 100%;
        font-size: 16px;
      }
      .bodyClass2-fgZSxP4y {
        color: #fff;
      }
      .bodyClass3-fgZSxP4y {
        background: #fff;
        color: #411206;
      }
      .wrapage {
        background-size: 100%;
        width: 100%;
        height: 100%;
      }
      .centerBlock {
        width: 100%;
        margin: 0 auto;
        text-align: center;
        display: flex;
        justify-content: center;
        align-self: center;
        align-items: center;
        height: 100%;
      }
      .centerBlock h2 {
        font-size: 24px;
        padding: 0px 0px 25px;
      }
      .centerBlock p {
        font-weight: 500;
        font-size: 18px;
      }
      p {
        margin-bottom: 10px;
      }
      .mainBlock-fgZSxP4y {
        text-align: start;
      }
      .mainBlock-fgZSxP4y ul {
        text-align: start;
        padding: 20px;
        display: flex;
        flex-direction: column;
        gap: 15px;
      }
      .mainBlock-fgZSxP4y ul > li span {
        font-weight: bold;
      }
      .mainBlock-fgZSxP4y {
        max-width: 1000px;
        margin: 0 auto;
        padding: 40px;
        border-radius: 0px;
      }
      .mainBlock-fgZSxP4y .cBlock-fgZSxP4y {
        text-align: start;
      }

      .bodyClass3-fgZSxP4y .mainBlock-fgZSxP4y {
        background: none;
        border-top: 2px solid #f7f3e9;
        border-bottom: 2px solid #f7f3e9;
      }
      .bodyClass2-fgZSxP4y .mainBlock-fgZSxP4y {
        background: #000000;
        color: #fff !important;
        box-shadow: 0px 0px 0px #000000;
      }
      .order-fgZSxP4y {
        font-size: 22px !important;
      }

      @media screen and (max-width: 639px) {
        .centerBlock p {
          padding: 0px 15px;
        }
        .centerBlock h2 {
          padding: 0px 10px 15px;
        }
        .mainBlock-fgZSxP4y {
          padding: 15px;
        }
      }
      @media screen and (max-width: 480px) {
        body {
          height: 100%;
        }
      }
    </style>
  </head>
  <body class="bodyClass1-fgZSxP4y">
    <div class="wrapage">
      <div class="centerBlock">
        <div class="mainBlock-fgZSxP4y">
          <p>
            At "Ligyting Language Hub," we extend our sincere gratitude to every
            valued language learner and linguistic enthusiast who has chosen us
            as their preferred destination for exploring and achieving the
            perfect blend of language mastery and joy in their linguistic
            journey. Your trust in our platform fuels our commitment to
            providing an exceptional language learning experience that not only
            aligns with but exceeds your expectations, offering services
            tailored to meet your unique language aspirations.
          </p>
          <p>
            Our commitment to maintaining a leading position in the language
            learning industry propels us to uphold the highest standards in our
            services and customer support. Your valuable insights, creative
            suggestions, and perspectives serve as the cornerstone of our
            continuous improvement and excellence. If you have any questions or
            concerns, rest assured that our responsive and knowledgeable team is
            ready to assist. We look forward to guiding you through the realm of
            language learning, ensuring your overall satisfaction and
            contentment.
          </p>
          <p>
            We express profound gratitude for your dedication to Ligyting
            Language Hub and for choosing us as an indispensable companion in
            your language learning journey. Together, we share a common
            enthusiasm for linguistic exploration and the discovery of
            innovative language experiences.
          </p>
          <p class="cBlock-fgZSxP4y">
            With heartfelt appreciation and warm regards,
          </p>
          <p class="cBlock-fgZSxP4y">
            <span class="domain-fgZSxP4y">The Ligyting Language Hub Team</span>
          </p>
        </div>
      </div>
    </div>

    <script>
      var domainElements = document.getElementsByClassName('domain-fgZSxP4y');
      var hostname = window.location.hostname;
      for (var i = 0; i < domainElements.length; i++) {
        domainElements[i].innerHTML = hostname;
      }
    </script>
    <!-- Code injected by live-server -->
    <script>
      // <![CDATA[  <-- For SVG support
      if ('WebSocket' in window) {
        (function () {
          function refreshCSS() {
            var sheets = [].slice.call(document.getElementsByTagName('link'));
            var head = document.getElementsByTagName('head')[0];
            for (var i = 0; i < sheets.length; ++i) {
              var elem = sheets[i];
              var parent = elem.parentElement || head;
              parent.removeChild(elem);
              var rel = elem.rel;
              if (
                (elem.href && typeof rel != 'string') ||
                rel.length == 0 ||
                rel.toLowerCase() == 'stylesheet'
              ) {
                var url = elem.href.replace(/(&|\?)_cacheOverride=\d+/, '');
                elem.href =
                  url +
                  (url.indexOf('?') >= 0 ? '&' : '?') +
                  '_cacheOverride=' +
                  new Date().valueOf();
              }
              parent.appendChild(elem);
            }
          }
          var protocol =
            window.location.protocol === 'http:' ? 'ws://' : 'wss://';
          var address =
            protocol + window.location.host + window.location.pathname + '/ws';
          var socket = new WebSocket(address);
          socket.onmessage = function (msg) {
            if (msg.data == 'reload') window.location.reload();
            else if (msg.data == 'refreshcss') refreshCSS();
          };
          if (
            sessionStorage &&
            !sessionStorage.getItem('IsThisFirstTime_Log_From_LiveServer')
          ) {
            console.log('Live reload enabled.');
            sessionStorage.setItem('IsThisFirstTime_Log_From_LiveServer', true);
          }
        })();
      } else {
        console.error(
          'Upgrade your browser. This Browser is NOT supported WebSocket for Live-Reloading.'
        );
      }
      // ]]>
    </script>
  </body>
</html>
